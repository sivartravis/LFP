<html>
    <head>
        <script type="text/javascript" src="http://api.tiles.mapbox.com/mapbox.js/v1.0.0/mapbox.js"></script>
        <script type="text/javascript" src="js/ICanHaz.js"></script>
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/tabletop.js"></script>
        <script type="text/javascript" src="js/d3.js"></script>
        <script type="text/javascript" src="js/sheetsee.js"></script>
        <link href='http://api.tiles.mapbox.com/mapbox.js/v1.0.0/mapbox.css' rel='stylesheet' />
    </head>
	
    <style> #map {height: 600px; width: 600px;} </style>
	
    <body>
    <div id="map"></div>
    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', function() {
        var gData
        var URL = "0AkoNCp6jYef6dHlrLXM4XzgzcUJBTW1EcUxWdTl5ZFE&single=true&gid=0"
        Tabletop.init( { key: URL, callback: showInfo, simpleSheet: true } ) 
      }) 
      function showInfo(data) {
        gData = data
		
		
        optionsJSON = ["something", "something"]
        var geoJSON = Sheetsee.createGeoJSON(gData, optionsJSON)
        var map = Sheetsee.loadMap("map")
        Sheetsee.addTileLayer(map, 'examples.map-20v6611k')
        var markerLayer = Sheetsee.addMarkerLayer(geoJSON, map)
        // customize the popup content
        addPopups(map, markerLayer)
        function addPopups(map, markerLayer) {
          markerLayer.on('click', function(e) {
            var feature = e.layer.feature
            var popupContent = '<h3>' + feature.opts.something + '</h3>'
            e.layer.bindPopup(popupContent,{closeButton: false})
          })
        }
      }
    </script>
    </body>
</html>